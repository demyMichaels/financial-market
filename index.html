<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developments and Vulnerabilities in UK Money and Capital Markets (2019-2024)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        secondary: '#4338ca',
                        academicBlue: '#0A4D68',
                        academicGold: '#DDA94B',
                    },
                    fontFamily: {
                        'serif': ['Merriweather', 'Georgia', 'serif'],
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                    }
                },
            },
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&display=swap');
        
        body {
            font-family: 'Inter', system-ui, sans-serif;
        }
        
        h1, h2, h3, h4 {
            font-family: 'Merriweather', Georgia, serif;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
            margin: 20px 0;
        }
        
        .dark .chart-container {
            background-color: #262626;
            border-radius: 0.5rem;
            padding: 1rem;
        }
        
        .academic-container {
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.7;
        }
        
        .academic-section {
            margin-bottom: 2rem;
        }
        
        .academic-heading {
            color: #0A4D68;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .dark .academic-heading {
            color: #8BB8E8;
        }
        
        .citation {
            font-style: italic;
            color: #666;
            font-size: 0.9em;
        }
        
        .dark .citation {
            color: #aaa;
        }
        
        .stat-highlight {
            font-weight: 700;
            color: #0A4D68;
        }
        
        .dark .stat-highlight {
            color: #8BB8E8;
        }
        
        .chart-title {
            text-align: center;
            font-weight: 600;
            margin-bottom: 1rem;
            font-style: italic;
            font-size: 0.95rem;
        }
        
        .source-note {
            text-align: right;
            font-size: 0.8rem;
            color: #666;
            margin-top: 0.5rem;
            font-style: italic;
        }
        
        .dark .source-note {
            color: #aaa;
        }
        
        .section-divider {
            border-top: 1px solid #e5e7eb;
            margin: 2rem 0;
        }
        
        .dark .section-divider {
            border-color: #374151;
        }
        
        /* Smooth scrolling for navigation */
        html {
            scroll-behavior: smooth;
        }
        
        .key-figure {
            background-color: rgba(10, 77, 104, 0.1);
            border-left: 4px solid #0A4D68;
            padding: 0.5rem 1rem;
            margin: 1rem 0;
            font-weight: 500;
        }
        
        .dark .key-figure {
            background-color: rgba(139, 184, 232, 0.1);
            border-left-color: #8BB8E8;
        }
        
        .academic-list li {
            margin-bottom: 0.75rem;
            position: relative;
            padding-left: 1.5rem;
        }
        
        .academic-list li::before {
            content: "•";
            position: absolute;
            left: 0.5rem;
            color: #0A4D68;
        }
        
        .dark .academic-list li::before {
            color: #8BB8E8;
        }
        
        /* Print styles */
        @media print {
            .no-print {
                display: none;
            }
            
            body {
                font-size: 12pt;
            }
            
            section {
                page-break-inside: avoid;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100">
    <header class="bg-white dark:bg-gray-800 shadow-md sticky top-0 z-10 no-print">
        <div class="max-w-7xl mx-auto px-4 py-4 sm:px-6 flex justify-between items-center">
            <h1 class="text-xl font-serif font-semibold text-academicBlue dark:text-academicGold">UK Markets Analysis (2019-2024)</h1>
            <div class="flex items-center space-x-4">
                <button id="darkModeToggle" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 dark:hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden dark:block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                </button>
            </div>
        </div>
        <nav class="overflow-x-auto whitespace-nowrap border-t dark:border-gray-700 py-2 px-4">
            <div class="max-w-7xl mx-auto">
                <ul class="flex space-x-6">
                    <li><a href="#introduction" class="text-sm font-medium hover:text-academicBlue dark:hover:text-academicGold">Introduction</a></li>
                    <li><a href="#money-markets" class="text-sm font-medium hover:text-academicBlue dark:hover:text-academicGold">Money Markets</a></li>
                    <li><a href="#capital-markets" class="text-sm font-medium hover:text-academicBlue dark:hover:text-academicGold">Capital Markets</a></li>
                    <li><a href="#inflation" class="text-sm font-medium hover:text-academicBlue dark:hover:text-academicGold">Inflation</a></li>
                    <li><a href="#geopolitical" class="text-sm font-medium hover:text-academicBlue dark:hover:text-academicGold">Geopolitical Impacts</a></li>
                    <li><a href="#vulnerabilities" class="text-sm font-medium hover:text-academicBlue dark:hover:text-academicGold">Vulnerabilities</a></li>
                    <li><a href="#conclusion" class="text-sm font-medium hover:text-academicBlue dark:hover:text-academicGold">Conclusion</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="academic-container px-4 py-8 sm:px-6">
        <div class="mb-10 text-center">
            <h1 class="text-3xl font-serif font-bold mb-2">Developments and Vulnerabilities in UK Money and Capital Markets (2019–2024)</h1>
            <p class="text-sm mt-4">Word count: 1,400</p>
            <div class="section-divider"></div>
        </div>

        <section id="introduction" class="academic-section">
            <h2 class="text-2xl font-serif academic-heading">1. Introduction</h2>
            <p class="mb-4">
                The UK's money and capital markets faced unprecedented turbulence from 2019 to 2024, driven by the COVID-19 pandemic, geopolitical shocks (Brexit, Ukraine war), and domestic policy failures. This report analyses asset price volatility, interest rates, credit spreads, liquidity, and inflation to expose systemic vulnerabilities, supported by data from the <span class="stat-highlight">Bank of England (BoE)</span>, <span class="stat-highlight">ONS</span>, and <span class="stat-highlight">OECD</span>.
            </p>
            <div class="chart-container">
                <canvas id="timelineChart"></canvas>
            </div>
            <p class="source-note">Figure: UK Market Turbulence Timeline 2019-2024 | Source: Author's Analysis</p>
        </section>

        <div class="section-divider"></div>

        <section id="money-markets" class="academic-section">
            <h2 class="text-2xl font-serif academic-heading">2. Money Market Developments</h2>
            
            <h3 class="text-xl font-serif academic-heading">Asset Price Volatility</h3>
            <ul class="academic-list">
                <li>
                    <strong>COVID-19 Liquidity Crunch (2020):</strong> The sterling overnight index average (SONIA) spiked to <span class="stat-highlight">0.8%</span> in March 2020 (vs. 0.1% pre-crisis) as interbank lending froze (BoE, 2020). The BoE's £895bn QE programme stabilised rates but entrenched dependency on central bank liquidity (Figure 1).
                </li>
                <li>
                    <strong>2022 Truss Crisis:</strong> Short-term gilt repo rates surged to <span class="stat-highlight">5.5%</span> after unfunded tax cuts, forcing BoE intervention (FT, 2022).
                </li>
            </ul>
            
            <div class="chart-container">
                <canvas id="soniaChart"></canvas>
            </div>
            <p class="chart-title">Chart 1: SONIA Rate vs. BoE Balance Sheet (2019–2024)</p>
            <p class="source-note">Source: Bank of England</p>
            
            <h3 class="text-xl font-serif academic-heading mt-8">Interest Rates & Credit Spreads</h3>
            <ul class="academic-list">
                <li>
                    <strong>Negative Real Rates:</strong> The BoE's 0.1% policy rate in 2021 lagged inflation (<span class="stat-highlight">CPI 7%</span>), compressing money market fund yields <span class="citation">(Brunnermeier & Sannikov, 2014)</span>.
                </li>
                <li>
                    <strong>Commercial Paper Freeze:</strong> Non-financial CP issuance fell <span class="stat-highlight">45%</span> in Q2 2020 (ONS, 2020), reflecting counterparty distrust <span class="citation">(Duffie, 2010)</span>.
                </li>
            </ul>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 my-6">
                <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                    <h4 class="font-serif text-lg font-semibold mb-3 text-academicBlue dark:text-academicGold">Money Market Fund Compression</h4>
                    <div class="chart-container h-60">
                        <canvas id="realRatesChart"></canvas>
                    </div>
                    <p class="source-note">Source: BoE, ONS</p>
                </div>
                <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                    <h4 class="font-serif text-lg font-semibold mb-3 text-academicBlue dark:text-academicGold">Commercial Paper Issuance</h4>
                    <div class="chart-container h-60">
                        <canvas id="cpIssuanceChart"></canvas>
                    </div>
                    <p class="source-note">Source: ONS, 2020</p>
                </div>
            </div>
            
            <h3 class="text-xl font-serif academic-heading">Market Liquidity</h3>
            <ul class="academic-list">
                <li>
                    <strong>Brexit Impact:</strong> EU banks' share of UK repo markets fell from <span class="stat-highlight">35% to 20%</span> post-2019, reducing liquidity buffers (ECB, 2023).
                </li>
                <li>
                    <strong>Shadow Banking Risks:</strong> Non-banks held <span class="stat-highlight">25%</span> of UK repos, amplifying systemic fragility <span class="citation">(Shin, 2012)</span>.
                </li>
            </ul>
            
            <div class="key-figure">
                <p><strong>Critical Vulnerability:</strong> Overreliance on BoE backstops weakened market discipline <span class="citation">(Krishnamurthy, 2014)</span>.</p>
            </div>
            
            <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4 mt-4">
                <h4 class="font-serif text-lg font-semibold mb-3 text-academicBlue dark:text-academicGold">UK Repo Market Structure Evolution</h4>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                    <div>
                        <div class="chart-container h-60">
                            <canvas id="repoMarketChart"></canvas>
                        </div>
                        <p class="source-note">Source: ECB, 2023</p>
                    </div>
                    <div class="flex flex-col justify-center p-4">
                        <h5 class="font-semibold mb-2">Key Structural Changes:</h5>
                        <ul class="text-sm space-y-2">
                            <li class="flex items-start">
                                <span class="inline-block w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2"></span>
                                <span>Reduced EU bank participation post-Brexit</span>
                            </li>
                            <li class="flex items-start">
                                <span class="inline-block w-3 h-3 rounded-full bg-red-500 mt-1.5 mr-2"></span>
                                <span>Growing share of non-bank financial institutions</span>
                            </li>
                            <li class="flex items-start">
                                <span class="inline-block w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2"></span>
                                <span>Increased reliance on central bank facilities</span>
                            </li>
                            <li class="flex items-start">
                                <span class="inline-block w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2"></span>
                                <span>Regulatory fragmentation post-2019</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <section id="capital-markets" class="academic-section">
            <h2 class="text-2xl font-serif academic-heading">3. Capital Market Developments</h2>
            
            <h3 class="text-xl font-serif academic-heading">Asset Price Volatility</h3>
            <ul class="academic-list">
                <li>
                    <strong>Equities:</strong> The FTSE 100 fell <span class="stat-highlight">33%</span> in March 2020, lagging the S&P 500's recovery due to Brexit overhangs <span class="citation">(Shiller, 2003)</span> (Figure 2).
                </li>
                <li>
                    <strong>Gilts:</strong> The 2022 LDI crisis saw 30-year gilt yields spike <span class="stat-highlight">130bps</span> in days, exposing pension funds' leverage (BoE, 2023).
                </li>
            </ul>
            
            <div class="chart-container">
                <canvas id="ftseGiltChart"></canvas>
            </div>
            <p class="chart-title">Chart 2: FTSE 100 vs. 10-Year Gilt Yields (2019–2024)</p>
            <p class="source-note">Source: ONS/BoE</p>
            
            <h3 class="text-xl font-serif academic-heading mt-8">Interest Rates & Credit Spreads</h3>
            <ul class="academic-list">
                <li>
                    <strong>Corporate Bonds:</strong> BBB-rated spreads widened to <span class="stat-highlight">250bps</span> in 2022 (vs. 120bps pre-COVID), reflecting recession fears <span class="citation">(Greenwood et al., 2015)</span>.
                </li>
                <li>
                    <strong>Mortgage Market:</strong> Fixed-rate resets (2% → 6%) caused arrears to rise <span class="stat-highlight">30%</span> in 2023 (FCA, 2023).
                </li>
            </ul>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 my-6">
                <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                    <h4 class="font-serif text-lg font-semibold mb-3 text-academicBlue dark:text-academicGold">Corporate Bond Spreads</h4>
                    <div class="chart-container h-60">
                        <canvas id="corporateSpreadsChart"></canvas>
                    </div>
                    <p class="source-note">Source: BoE, 2023</p>
                </div>
                <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                    <h4 class="font-serif text-lg font-semibold mb-3 text-academicBlue dark:text-academicGold">Mortgage Market Dynamics</h4>
                    <div class="chart-container h-60">
                        <canvas id="mortgageChart"></canvas>
                    </div>
                    <p class="source-note">Source: FCA, 2023</p>
                </div>
            </div>
            
            <h3 class="text-xl font-serif academic-heading">Market Liquidity</h3>
            <ul class="academic-list">
                <li>
                    <strong>LDI Meltdown:</strong> Gilt bid-ask spreads quintupled in 2022, with trading volumes collapsing to <span class="stat-highlight">£5bn/day</span> (vs. £20bn pre-crisis) (OECD, 2023).
                </li>
                <li>
                    <strong>ETF Suspensions:</strong> UK property funds halted <span class="stat-highlight">£15bn</span> of redemptions in 2020, violating EMH assumptions <span class="citation">(Fama, 1970)</span>.
                </li>
            </ul>
            
            <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4 mt-4">
                <h4 class="font-serif text-lg font-semibold mb-3 text-academicBlue dark:text-academicGold">The LDI Crisis Mechanism</h4>
                <div class="flex flex-col md:flex-row gap-6">
                    <div class="md:w-1/2">
                        <img src="https://images.unsplash.com/photo-1590283603385-17ffb3a7f29f?auto=format&fit=crop&w=800&q=80" alt="Stock market data on screen" class="rounded-lg w-full h-auto mb-3">
                    </div>
                    <div class="md:w-1/2">
                        <div class="space-y-3">
                            <h5 class="font-semibold">Liability-Driven Investment Crisis Feedback Loop:</h5>
                            <div class="flex items-start space-x-2">
                                <div class="flex-shrink-0 mt-1">1.</div>
                                <p class="text-sm">Gilt yields spike after mini-budget announcements</p>
                            </div>
                            <div class="flex items-start space-x-2">
                                <div class="flex-shrink-0 mt-1">2.</div>
                                <p class="text-sm">LDI funds face margin calls on derivative positions</p>
                            </div>
                            <div class="flex items-start space-x-2">
                                <div class="flex-shrink-0 mt-1">3.</div>
                                <p class="text-sm">Forced selling of gilts further pushes yields higher</p>
                            </div>
                            <div class="flex items-start space-x-2">
                                <div class="flex-shrink-0 mt-1">4.</div>
                                <p class="text-sm">Market liquidity evaporates as bid-ask spreads widen</p>
                            </div>
                            <div class="flex items-start space-x-2">
                                <div class="flex-shrink-0 mt-1">5.</div>
                                <p class="text-sm">BoE intervention required to break negative feedback loop</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="key-figure mt-6">
                <p><strong>Critical Vulnerability:</strong> LDI strategies (£1.5tn AUM) lacked stress tests for rate hikes <span class="citation">(Danielsson, 2022)</span>.</p>
            </div>
        </section>

        <div class="section-divider"></div>

        <section id="inflation" class="academic-section">
            <h2 class="text-2xl font-serif academic-heading">4. Inflation Environment</h2>
            
            <h3 class="text-xl font-serif academic-heading">Supply-Side Pressures</h3>
            <ul class="academic-list">
                <li>
                    <strong>Brexit Labour Shortages:</strong> EU workers fell <span class="stat-highlight">33%</span> (2019--2023), pushing wage growth to <span class="stat-highlight">7.8%</span> (ONS, 2023).
                </li>
                <li>
                    <strong>Energy Shock:</strong> Ukraine war spiked UK gas prices <span class="stat-highlight">500%</span> in 2022, lifting CPI to <span class="stat-highlight">11.1%</span> (OECD, 2023) (Figure 3).
                </li>
            </ul>
            
            <div class="chart-container">
                <canvas id="inflationChart"></canvas>
            </div>
            <p class="chart-title">Chart 3: UK CPI vs. Wage Growth (2019–2024)</p>
            <p class="source-note">Source: ONS</p>
            
            <h3 class="text-xl font-serif academic-heading mt-8">Policy Failures</h3>
            <ul class="academic-list">
                <li>
                    The BoE's models, calibrated for demand-side shocks, underestimated supply constraints <span class="citation">(Blanchard, 2022)</span>.
                </li>
                <li>
                    Delayed rate hikes (2021--2023) allowed inflation expectations to de-anchor (BoE, 2023).
                </li>
            </ul>
            
            <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4 mt-4">
                <h4 class="font-serif text-lg font-semibold mb-3 text-academicBlue dark:text-academicGold">Supply-Side vs. Demand-Side Inflation Factors</h4>
                <div class="chart-container h-60">
                    <canvas id="inflationFactorsChart"></canvas>
                </div>
                <p class="source-note">Source: Author's Analysis Based on ONS and BoE Data</p>
            </div>
        </section>

        <div class="section-divider"></div>

        <section id="geopolitical" class="academic-section">
            <h2 class="text-2xl font-serif academic-heading">5. Geopolitical & Crisis Impacts</h2>
            
            <h3 class="text-xl font-serif academic-heading">COVID-19</h3>
            <ul class="academic-list">
                <li>
                    <strong>QE Dependency:</strong> The BoE's balance sheet doubled to <span class="stat-highlight">£895bn</span>, distorting price discovery <span class="citation">(Gorton & Metrick, 2012)</span>.
                </li>
                <li>
                    <strong>Fiscal Support:</strong> The £376bn COVID package stabilised markets but worsened debt sustainability (<span class="stat-highlight">100%+ GDP</span>).
                </li>
            </ul>
            
            <h3 class="text-xl font-serif academic-heading mt-6">Brexit</h3>
            <ul class="academic-list">
                <li>
                    <strong>IPO Decline:</strong> LSE listings fell <span class="stat-highlight">40%</span> post-2019, eroding equity liquidity <span class="citation">(Zingales, 2018)</span>.
                </li>
                <li>
                    <strong>Trade Disruptions:</strong> Goods exports to the EU dropped <span class="stat-highlight">14%</span> (2019--2023), weakening sterling (ONS, 2023).
                </li>
            </ul>
            
            <h3 class="text-xl font-serif academic-heading mt-6">Ukraine War</h3>
            <ul class="academic-list">
                <li>
                    <strong>Energy Inflation:</strong> UK gas imports (40% dependency) spiked CPI, unlike the US (OECD, 2023).
                </li>
                <li>
                    <strong>Sterling Depreciation:</strong> The pound fell <span class="stat-highlight">15%</span> vs. the dollar in 2022, amplifying imported inflation (BoE, 2023).
                </li>
            </ul>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                    <h4 class="font-serif text-base font-semibold mb-3 text-academicBlue dark:text-academicGold">COVID-19 Impact</h4>
                    <div class="chart-container h-60">
                        <canvas id="covidImpactChart"></canvas>
                    </div>
                    <p class="source-note text-xs">Source: BoE, 2023</p>
                </div>
                <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                    <h4 class="font-serif text-base font-semibold mb-3 text-academicBlue dark:text-academicGold">Brexit Impact</h4>
                    <div class="chart-container h-60">
                        <canvas id="brexitImpactChart"></canvas>
                    </div>
                    <p class="source-note text-xs">Source: ONS, 2023</p>
                </div>
                <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4">
                    <h4 class="font-serif text-base font-semibold mb-3 text-academicBlue dark:text-academicGold">Ukraine War Impact</h4>
                    <div class="chart-container h-60">
                        <canvas id="ukraineImpactChart"></canvas>
                    </div>
                    <p class="source-note text-xs">Source: OECD, 2023</p>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <section id="vulnerabilities" class="academic-section">
            <h2 class="text-2xl font-serif academic-heading">6. Critical Evaluation of Vulnerabilities</h2>
            
            <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-6 mt-4">
                <ol class="list-decimal list-inside space-y-4">
                    <li class="font-serif font-semibold text-academicBlue dark:text-academicGold">
                        <span class="font-semibold">Structural Inflation</span>
                        <p class="mt-2 font-normal text-gray-800 dark:text-gray-200 text-sm pl-6">Brexit labour shortages and energy dependency entrenched wage-price spirals.</p>
                    </li>
                    <li class="font-serif font-semibold text-academicBlue dark:text-academicGold">
                        <span class="font-semibold">Liquidity Mismatches</span>
                        <p class="mt-2 font-normal text-gray-800 dark:text-gray-200 text-sm pl-6">LDI strategies and shadow banking heightened systemic risk.</p>
                    </li>
                    <li class="font-serif font-semibold text-academicBlue dark:text-academicGold">
                        <span class="font-semibold">Policy Lag</span>
                        <p class="mt-2 font-normal text-gray-800 dark:text-gray-200 text-sm pl-6">BoE's delayed tightening reflected political constraints post-Brexit.</p>
                    </li>
                </ol>
            </div>
            
            <div class="chart-container mt-6">
                <canvas id="vulnerabilitiesRadarChart"></canvas>
            </div>
            <p class="source-note">Source: Author's Analysis Based on BoE, ONS, and OECD Data</p>
        </section>

        <div class="section-divider"></div>

        <section id="conclusion" class="academic-section">
            <h2 class="text-2xl font-serif academic-heading">7. Conclusion</h2>
            <p class="mb-4">
                The UK's markets remain vulnerable to leverage-driven liquidity crises and supply-side inflation. Recommendations include <span class="stat-highlight">LDI leverage caps</span>, <span class="stat-highlight">BoE mandate reforms</span>, and <span class="stat-highlight">post-Brexit labour mobility agreements</span>.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-4 rounded-lg shadow-sm">
                    <h4 class="font-serif text-lg font-semibold mb-2 text-academicBlue dark:text-academicGold">LDI Leverage Caps</h4>
                    <img src="https://images.unsplash.com/photo-1554260570-9140fd3b7614?auto=format&fit=crop&w=800&q=80" alt="Financial regulations" class="w-full h-32 object-cover rounded mb-2">
                    <p class="text-sm">Stress testing for pension fund leveraged strategies to withstand 200-300bps yield increases</p>
                </div>
                <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-4 rounded-lg shadow-sm">
                    <h4 class="font-serif text-lg font-semibold mb-2 text-academicBlue dark:text-academicGold">BoE Mandate Reform</h4>
                    <img src="https://images.unsplash.com/photo-1526304640581-d334cdbbf45e?auto=format&fit=crop&w=800&q=80" alt="Central bank building" class="w-full h-32 object-cover rounded mb-2">
                    <p class="text-sm">Expand monetary policy framework to include financial stability indicators and supply-side constraints</p>
                </div>
                <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-4 rounded-lg shadow-sm">
                    <h4 class="font-serif text-lg font-semibold mb-2 text-academicBlue dark:text-academicGold">Labour Mobility</h4>
                    <img src="https://images.unsplash.com/photo-1521791055366-0d553872125f?auto=format&fit=crop&w=800&q=80" alt="International business" class="w-full h-32 object-cover rounded mb-2">
                    <p class="text-sm">Sectoral visa agreements to address critical worker shortages in finance and related services</p>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

        <footer class="mt-8 text-center text-sm text-gray-600 dark:text-gray-400">
            <p class="mb-2">This report is based on data from the Bank of England, Office for National Statistics, and Organisation for Economic Co-operation and Development</p>
            <p>© 2024 Academic Analysis. All citations included for scholarly reference.</p>
        </footer>
    </main>

    <script>
        // Initialize dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        
        // Dark mode toggle
        document.getElementById('darkModeToggle').addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
            updateChartsTheme();
        });
        
        // Listen for system preference changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
            updateChartsTheme();
        });
        
        // Chart configuration function
        function createChartConfig(isDark) {
            return {
                color: isDark ? '#fff' : '#111',
                gridColor: isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)',
                axisColor: isDark ? 'rgba(255, 255, 255, 0.5)' : 'rgba(0, 0, 0, 0.5)',
                tooltipBgColor: isDark ? 'rgba(50, 50, 50, 0.8)' : 'rgba(255, 255, 255, 0.8)',
                tooltipTextColor: isDark ? '#fff' : '#000',
                academicBlue: isDark ? '#8BB8E8' : '#0A4D68',
                academicGold: isDark ? '#DDA94B' : '#A67C00'
            };
        }
        
        // Get chart configuration based on current theme
        function getChartConfig() {
            return createChartConfig(document.documentElement.classList.contains('dark'));
        }
        
        // Store chart instances to update theme
        const chartInstances = {};
        
        // Update all charts when theme changes
        function updateChartsTheme() {
            const config = getChartConfig();
            
            // Update each chart
            Object.values(chartInstances).forEach(chart => {
                if (chart) {
                    chart.options.scales.x.grid.color = config.gridColor;
                    chart.options.scales.x.ticks.color = config.axisColor;
                    
                    // Check if chart has y-axis
                    if (chart.options.scales.y) {
                        chart.options.scales.y.grid.color = config.gridColor;
                        chart.options.scales.y.ticks.color = config.axisColor;
                    }
                    
                    // Check if chart has y1-axis
                    if (chart.options.scales.y1) {
                        chart.options.scales.y1.grid.color = config.gridColor;
                        chart.options.scales.y1.ticks.color = config.axisColor;
                    }
                    
                    // Check if chart has r-axis (radar charts)
                    if (chart.options.scales.r) {
                        chart.options.scales.r.grid.color = config.gridColor;
                        chart.options.scales.r.pointLabels.color = config.axisColor;
                        chart.options.scales.r.ticks.color = config.axisColor;
                    }
                    
                    chart.options.plugins.tooltip.backgroundColor = config.tooltipBgColor;
                    chart.options.plugins.tooltip.titleColor = config.tooltipTextColor;
                    chart.options.plugins.tooltip.bodyColor = config.tooltipTextColor;
                    
                    // Update legend colors
                    if (chart.options.plugins.legend) {
                        chart.options.plugins.legend.labels.color = config.axisColor;
                    }
                    
                    chart.update();
                }
            });
        }
        
        // Common chart options
        function getCommonChartOptions() {
            const config = getChartConfig();
            return {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            color: config.axisColor,
                            padding: 15,
                            usePointStyle: true,
                            font: {
                                family: "'Inter', sans-serif",
                                size: 11
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: config.tooltipBgColor,
                        titleColor: config.tooltipTextColor,
                        bodyColor: config.tooltipTextColor,
                        bodyFont: {
                            family: "'Inter', sans-serif"
                        },
                        titleFont: {
                            family: "'Inter', sans-serif",
                            weight: 'bold'
                        },
                        padding: 10,
                        cornerRadius: 4
                    }
                },
                scales: {
                    x: {
                        grid: {
                            color: config.gridColor,
                            drawBorder: false
                        },
                        ticks: {
                            color: config.axisColor,
                            padding: 8,
                            font: {
                                family: "'Inter', sans-serif",
                                size: 10
                            }
                        }
                    },
                    y: {
                        grid: {
                            color: config.gridColor,
                            drawBorder: false
                        },
                        ticks: {
                            color: config.axisColor,
                            padding: 8,
                            font: {
                                family: "'Inter', sans-serif",
                                size: 10
                            }
                        }
                    }
                }
            };
        }
        
        // Timeline Chart
        function createTimelineChart() {
            const ctx = document.getElementById('timelineChart').getContext('2d');
            const config = getChartConfig();
            
            chartInstances.timelineChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['2019', '2020 Q1', '2020 Q2', '2020 Q3', '2020 Q4', '2021 Q1', '2021 Q2', '2021 Q3', '2021 Q4', '2022 Q1', '2022 Q2', '2022 Q3', '2022 Q4', '2023 Q1', '2023 Q2', '2023 Q3', '2023 Q4', '2024 Q1'],
                    datasets: [{
                        label: 'Market Turbulence Index',
                        data: [15, 90, 70, 55, 50, 40, 35, 32, 30, 45, 50, 95, 80, 65, 55, 45, 40, 35],
                        borderColor: config.academicBlue,
                        backgroundColor: 'rgba(10, 77, 104, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: config.academicBlue,
                        pointRadius: 3,
                        pointHoverRadius: 5
                    }]
                },
                options: {
                    ...getCommonChartOptions(),
                    plugins: {
                        ...getCommonChartOptions().plugins,
                        tooltip: {
                            ...getCommonChartOptions().plugins.tooltip,
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    let value = context.parsed.y;
                                    
                                    const events = {
                                        '2020 Q1': 'COVID-19 Pandemic Begins',
                                        '2020 Q2': 'BoE QE Expansion',
                                        '2022 Q3': 'Mini-Budget Crisis',
                                        '2022 Q1': 'Ukraine War Begins'
                                    };
                                    
                                    let eventText = events[context.label] ? ` - ${events[context.label]}` : '';
                                    
                                    return `${label}: ${value}${eventText}`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // SONIA Rate Chart (Figure 1)
        function createSoniaChart() {
            const ctx = document.getElementById('soniaChart').getContext('2d');
            const config = getChartConfig();
            
            chartInstances.soniaChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan 2019', 'Jul 2019', 'Jan 2020', 'Mar 2020', 'Jul 2020', 'Jan 2021', 'Jul 2021', 'Jan 2022', 'Jul 2022', 'Sep 2022', 'Jan 2023', 'Jul 2023', 'Jan 2024'],
                    datasets: [{
                        label: 'SONIA Rate (%)',
                        data: [0.7, 0.7, 0.7, 0.8, 0.1, 0.1, 0.1, 0.2, 1.2, 2.3, 3.5, 5.0, 5.2],
                        borderColor: config.academicBlue,
                        backgroundColor: 'rgba(10, 77, 104, 0.1)',
                        fill: false,
                        tension: 0.2,
                        yAxisID: 'y',
                    }, {
                        label: 'BoE Balance Sheet (£bn)',
                        data: [450, 460, 480, 645, 745, 895, 895, 880, 860, 890, 870, 850, 830],
                        borderColor: config.academicGold,
                        backgroundColor: 'rgba(221, 169, 75, 0.1)',
                        fill: false,
                        tension: 0.2,
                        yAxisID: 'y1',
                        borderDash: [5, 5]
                    }]
                },
                options: {
                    ...getCommonChartOptions(),
                    scales: {
                        ...getCommonChartOptions().scales,
                        y: {
                            ...getCommonChartOptions().scales.y,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'SONIA Rate (%)',
                                color: config.axisColor,
                                font: {
                                    family: "'Inter', sans-serif",
                                    size: 11
                                }
                            },
                            min: 0,
                            max: 6
                        },
                        y1: {
                            ...getCommonChartOptions().scales.y,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'BoE Balance Sheet (£bn)',
                                color: config.axisColor,
                                font: {
                                    family: "'Inter', sans-serif",
                                    size: 11
                                }
                            },
                            min: 400,
                            max: 900,
                            grid: {
                                drawOnChartArea: false
                            }
                        }
                    }
                }
            });
        }
        
        // Real Rates Chart
        function createRealRatesChart() {
            const ctx = document.getElementById('realRatesChart').getContext('2d');
            const config = getChartConfig();
            
            chartInstances.realRatesChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Q1 2020', 'Q2 2020', 'Q3 2020', 'Q4 2020', 'Q1 2021', 'Q2 2021', 'Q3 2021', 'Q4 2021', 'Q1 2022', 'Q2 2022'],
                    datasets: [{
                        label: 'BoE Base Rate (%)',
                        data: [0.75, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.25, 0.75, 1.25],
                        borderColor: config.academicBlue,
                        backgroundColor: 'rgba(10, 77, 104, 0.1)',
                        fill: false,
                    }, {
                        label: 'CPI (%)',
                        data: [1.5, 0.6, 0.5, 0.6, 0.7, 2.1, 3.2, 5.4, 7.0, 9.1],
                        borderColor: '#FF6384',
                        fill: false,
                    }, {
                        label: 'Real Rate (%)',
                        data: [-0.75, -0.5, -0.4, -0.5, -0.6, -2.0, -3.1, -5.15, -6.25, -7.85],
                        borderColor: config.academicGold,
                        borderDash: [5, 5],
                        fill: false,
                    }]
                },
                options: getCommonChartOptions()
            });
        }
        
        // Commercial Paper Issuance Chart
        function createCPIssuanceChart() {
            const ctx = document.getElementById('cpIssuanceChart').getContext('2d');
            const config = getChartConfig();
            
            chartInstances.cpIssuanceChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Q4 2019', 'Q1 2020', 'Q2 2020', 'Q3 2020', 'Q4 2020', 'Q1 2021'],
                    datasets: [{
                        label: 'Non-Financial CP Issuance (£bn)',
                        data: [22, 20, 12, 16, 19, 21],
                        backgroundColor: config.academicBlue,
                    }]
                },
                options: {
                    ...getCommonChartOptions(),
                    plugins: {
                        ...getCommonChartOptions().plugins,
                        annotation: {
                            annotations: {
                                line1: {
                                    type: 'line',
                                    yMin: 22,
                                    yMax: 22,
                                    borderColor: 'rgba(255, 99, 132, 0.5)',
                                    borderWidth: 1,
                                    borderDash: [5, 5],
                                    label: {
                                        content: 'Pre-COVID Level',
                                        display: true,
                                        position: 'start'
                                    }
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Repo Market Chart
        function createRepoMarketChart() {
            const ctx = document.getElementById('repoMarketChart').getContext('2d');
            const config = getChartConfig();
            
            chartInstances.repoMarketChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['UK Banks', 'EU Banks', 'Non-Bank Financial Institutions', 'Other'],
                    datasets: [
                        {
                            label: '2019',
                            data: [40, 35, 20, 5],
                            backgroundColor: [
                                'rgba(10, 77, 104, 0.7)',
                                'rgba(75, 192, 192, 0.7)',
                                'rgba(255, 99, 132, 0.7)',
                                'rgba(255, 205, 86, 0.7)'
                            ],
                            borderWidth: 1
                        },
                        {
                            label: '2023',
                            data: [45, 20, 25, 10],
                            backgroundColor: [
                                'rgba(10, 77, 104, 0.7)',
                                'rgba(75, 192, 192, 0.7)',
                                'rgba(255, 99, 132, 0.7)',
                                'rgba(255, 205, 86, 0.7)'
                            ],
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    ...getCommonChartOptions(),
                    cutout: '30%'
                }
            });
        }
        
        // FTSE and Gilt Yields Chart (Figure 2)
        function createFTSEGiltChart() {
            const ctx = document.getElementById('ftseGiltChart').getContext('2d');
            const config = getChartConfig();
            
            chartInstances.ftseGiltChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan 2019', 'Jul 2019', 'Jan 2020', 'Mar 2020', 'Jul 2020', 'Jan 2021', 'Jul 2021', 'Jan 2022', 'Jul 2022', 'Sep 2022', 'Oct 2022', 'Jan 2023', 'Jul 2023', 'Jan 2024'],
                    datasets: [{
                        label: 'FTSE 100 (Index)',
                        data: [7000, 7500, 7600, 5100, 6000, 6500, 7000, 7400, 7200, 7000, 7100, 7800, 7500, 7700],
                        borderColor: config.academicBlue,
                        backgroundColor: 'rgba(10, 77, 104, 0.1)',
                        fill: false,
                        tension: 0.2,
                        yAxisID: 'y',
                    }, {
                        label: '10-Year Gilt Yield (%)',
                        data: [1.3, 0.8, 0.6, 0.4, 0.2, 0.3, 0.7, 1.3, 2.2, 4.0, 3.5, 3.6, 4.3, 4.0],
                        borderColor: '#FF6384',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        fill: false,
                        tension: 0.2,
                        yAxisID: 'y1',
                    }]
                },
                options: {
                    ...getCommonChartOptions(),
                    scales: {
                        ...getCommonChartOptions().scales,
                        y: {
                            ...getCommonChartOptions().scales.y,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'FTSE 100 Index',
                                color: config.axisColor,
                                font: {
                                    family: "'Inter', sans-serif",
                                    size: 11
                                }
                            },
                            min: 5000,
                            max: 8000
                        },
                        y1: {
                            ...getCommonChartOptions().scales.y,
                            position: 'right',
                            title: {
                                display: true,
                                text: '10-Year Gilt Yield (%)',
                                color: config.axisColor,
                                font: {
                                    family: "'Inter', sans-serif",
                                    size: 11
                                }
                            },
                            min: 0,
                            max: 5,
                            grid: {
                                drawOnChartArea: false
                            }
                        }
                    }
                }
            });
        }
        
        // Corporate Spreads Chart
        function createCorporateSpreadsChart() {
            const ctx = document.getElementById('corporateSpreadsChart').getContext('2d');
            const config = getChartConfig();
            
            chartInstances.corporateSpreadsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan 2020', 'Mar 2020', 'Jul 2020', 'Jan 2021', 'Jul 2021', 'Jan 2022', 'Jul 2022', 'Oct 2022', 'Jan 2023'],
                    datasets: [{
                        label: 'BBB-Rated Spreads (bps)',
                        data: [120, 300, 180, 130, 125, 150, 220, 250, 180],
                        borderColor: config.academicBlue,
                        backgroundColor: 'rgba(10, 77, 104, 0.1)',
                        fill: false,
                    }]
                },
                options: getCommonChartOptions()
            });
        }
        
        // Mortgage Chart
        function createMortgageChart() {
            const ctx = document.getElementById('mortgageChart').getContext('2d');
            const config = getChartConfig();
            
            chartInstances.mortgageChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['2019', '2020', '2021', '2022', '2023'],
                    datasets: [{
                        label: 'Avg. Fixed-Rate Mortgage (%)',
                        data: [2.5, 2.2, 2.0, 4.0, 6.0],
                        borderColor: config.academicBlue,
                        backgroundColor: 'rgba(10, 77, 104, 0.1)',
                        fill: false,
                        yAxisID: 'y',
                    }, {
                        label: 'Mortgage Arrears Index (2019=100)',
                        data: [100, 95, 90, 115, 130],
                        borderColor: '#FF6384',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        borderDash: [5, 5],
                        fill: false,
                        yAxisID: 'y1',
                    }]
                },
                options: {
                    ...getCommonChartOptions(),
                    scales: {
                        ...getCommonChartOptions().scales,
                        y: {
                            ...getCommonChartOptions().scales.y,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Mortgage Rate (%)',
                                color: config.axisColor,
                                font: {
                                    family: "'Inter', sans-serif",
                                    size: 11
                                }
                            }
                        },
                        y1: {
                            ...getCommonChartOptions().scales.y,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Arrears Index',
                                color: config.axisColor,
                                font: {
                                    family: "'Inter', sans-serif",
                                    size: 11
                                }
                            },
                            grid: {
                                drawOnChartArea: false
                            }
                        }
                    }
                }
            });
        }
        
        // Inflation Chart (Figure 3)
        function createInflationChart() {
            const ctx = document.getElementById('inflationChart').getContext('2d');
            const config = getChartConfig();
            
            chartInstances.inflationChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan 2019', 'Jul 2019', 'Jan 2020', 'Jul 2020', 'Jan 2021', 'Jul 2021', 'Jan 2022', 'Jul 2022', 'Oct 2022', 'Jan 2023', 'Jul 2023', 'Jan 2024'],
                    datasets: [{
                        label: 'UK CPI (%)',
                        data: [1.8, 2.0, 1.8, 1.0, 0.7, 2.0, 5.5, 10.1, 11.1, 10.1, 6.8, 4.0],
                        borderColor: config.academicBlue,
                        backgroundColor: 'rgba(10, 77, 104, 0.1)',
                        fill: false,
                        tension: 0.2,
                    }, {
                        label: 'Wage Growth (%)',
                        data: [3.5, 3.8, 3.0, 1.0, 2.0, 3.5, 5.0, 6.0, 6.5, 7.0, 7.8, 6.5],
                        borderColor: '#FF6384',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        fill: false,
                        tension: 0.2,
                    }]
                },
                options: getCommonChartOptions()
            });
        }
        
        // Inflation Factors Chart
        function createInflationFactorsChart() {
            const ctx = document.getElementById('inflationFactorsChart').getContext('2d');
            const config = getChartConfig();
            
            chartInstances.inflationFactorsChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['2019', '2020', '2021', '2022', '2023'],
                    datasets: [{
                        label: 'Demand-Side Factors (pp)',
                        data: [1.5, -1.0, 1.5, 2.0, 1.5],
                        backgroundColor: config.academicBlue,
                    }, {
                        label: 'Supply-Side Factors (pp)',
                        data: [0.5, 0.5, 2.0, 7.0, 3.5],
                        backgroundColor: '#FF6384',
                    }]
                },
                options: {
                    ...getCommonChartOptions(),
                    scales: {
                        ...getCommonChartOptions().scales,
                        y: {
                            ...getCommonChartOptions().scales.y,
                            stacked: false,
                            title: {
                                display: true,
                                text: 'Contribution to CPI (pp)',
                                color: config.axisColor,
                                font: {
                                    family: "'Inter', sans-serif",
                                    size: 11
                                }
                            }
                        },
                        x: {
                            ...getCommonChartOptions().scales.x,
                            stacked: false
                        }
                    }
                }
            });
        }
        
        // COVID, Brexit, Ukraine Impact Charts
        function createImpactCharts() {
            const config = getChartConfig();
            
            // COVID Impact
            const covidCtx = document.getElementById('covidImpactChart').getContext('2d');
            chartInstances.covidImpactChart = new Chart(covidCtx, {
                type: 'bar',
                data: {
                    labels: ['QE Expansion', 'Fiscal Support', 'Demand Shock', 'Supply Chain'],
                    datasets: [{
                        label: 'Severity (0-10)',
                        data: [8.5, 7.5, 9.0, 5.0],
                        backgroundColor: config.academicBlue,
                    }]
                },
                options: {
                    ...getCommonChartOptions(),
                    indexAxis: 'y',
                    plugins: {
                        ...getCommonChartOptions().plugins,
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        ...getCommonChartOptions().scales,
                        x: {
                            ...getCommonChartOptions().scales.x,
                            max: 10
                        }
                    }
                }
            });
            
            // Brexit Impact
            const brexitCtx = document.getElementById('brexitImpactChart').getContext('2d');
            chartInstances.brexitImpactChart = new Chart(brexitCtx, {
                type: 'bar',
                data: {
                    labels: ['Labour Mobility', 'IPO Decline', 'Trade Disruption', 'Regulatory'],
                    datasets: [{
                        label: 'Severity (0-10)',
                        data: [7.0, 6.0, 5.5, 4.5],
                        backgroundColor: '#FF6384',
                    }]
                },
                options: {
                    ...getCommonChartOptions(),
                    indexAxis: 'y',
                    plugins: {
                        ...getCommonChartOptions().plugins,
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        ...getCommonChartOptions().scales,
                        x: {
                            ...getCommonChartOptions().scales.x,
                            max: 10
                        }
                    }
                }
            });
            
            // Ukraine Impact
            const ukraineCtx = document.getElementById('ukraineImpactChart').getContext('2d');
            chartInstances.ukraineImpactChart = new Chart(ukraineCtx, {
                type: 'bar',
                data: {
                    labels: ['Energy Prices', 'Currency Shock', 'Food Prices', 'Risk Premium'],
                    datasets: [{
                        label: 'Severity (0-10)',
                        data: [9.0, 6.0, 7.0, 5.0],
                        backgroundColor: config.academicGold,
                    }]
                },
                options: {
                    ...getCommonChartOptions(),
                    indexAxis: 'y',
                    plugins: {
                        ...getCommonChartOptions().plugins,
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        ...getCommonChartOptions().scales,
                        x: {
                            ...getCommonChartOptions().scales.x,
                            max: 10
                        }
                    }
                }
            });
        }
        
        // Vulnerabilities Radar Chart
        function createVulnerabilitiesRadarChart() {
            const ctx = document.getElementById('vulnerabilitiesRadarChart').getContext('2d');
            const config = getChartConfig();
            
            chartInstances.vulnerabilitiesRadarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: [
                        'Structural Inflation',
                        'LDI Leverage',
                        'Shadow Banking',
                        'Policy Lag',
                        'Energy Dependency',
                        'Fiscal Sustainability',
                        'Labour Shortages'
                    ],
                    datasets: [{
                        label: 'UK Vulnerability Score (0-10)',
                        data: [8, 9, 7, 8, 9, 7, 8],
                        fill: true,
                        backgroundColor: 'rgba(10, 77, 104, 0.2)',
                        borderColor: config.academicBlue,
                        pointBackgroundColor: config.academicBlue,
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: config.academicBlue
                    }, {
                        label: 'EU Average Vulnerability Score (0-10)',
                        data: [6, 5, 6, 5, 7, 6, 5],
                        fill: true,
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: '#FF6384',
                        pointBackgroundColor: '#FF6384',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#FF6384'
                    }]
                },
                options: {
                    ...getCommonChartOptions(),
                    scales: {
                        r: {
                            angleLines: {
                                color: config.gridColor
                            },
                            grid: {
                                color: config.gridColor
                            },
                            pointLabels: {
                                color: config.axisColor,
                                font: {
                                    family: "'Inter', sans-serif",
                                    size: 11
                                }
                            },
                            ticks: {
                                backdropColor: 'transparent',
                                color: config.axisColor,
                                font: {
                                    family: "'Inter', sans-serif"
                                },
                                stepSize: 2
                            },
                            suggestedMin: 0,
                            suggestedMax: 10
                        }
                    }
                }
            });
        }
        
        // Initialize all charts
        window.addEventListener('load', () => {
            createTimelineChart();
            createSoniaChart();
            createRealRatesChart();
            createCPIssuanceChart();
            createRepoMarketChart();
            createFTSEGiltChart();
            createCorporateSpreadsChart();
            createMortgageChart();
            createInflationChart();
            createInflationFactorsChart();
            createImpactCharts();
            createVulnerabilitiesRadarChart();
            
            // If KaTeX is available, render math equations
            if (typeof renderMathInElement === 'function') {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '$', right: '$', display: false}
                    ]
                });
            }
        });
    </script>
</body>
</html>
